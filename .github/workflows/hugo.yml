name: Build with Hugo

on: [push]

jobs:
  hugo-minimum:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master

      - name: Install Hugo
        run: |
          wget "https://github.com/gohugoio/hugo/releases/download/v0.68.0/hugo_extended_0.68.0_Linux-64bit.deb" -O /tmp/hugo.deb
          sudo dpkg -i /tmp/hugo.deb

     - name: Run Hugo
       working-directory: ./
       run: make

    - name: Deploy
      uses: peaceiris/actions-gh-pages@v2
      env:
        # PERSONAL_TOKEN: ${{ secrets.ACCESS_TOKEN }}
        GITHUB_TOKEN: ${{ secrets.GithubBotToken }}
        PUBLISH_BRANCH: gh-pages
        PUBLISH_DIR: ./public
